<!-- ======================================================= -->
<!--               FORMULARIO “SOLICITA TU TARTA”          -->
<!-- ======================================================= -->
<div class="title-div">
  <h2 class="contact-title">Solicita tu Tarta</h2>
</div>

<div class="contenedor">
  <div class="contact-container">
    <p class="contact-description">
      Completa el siguiente formulario para solicitar tu tarta decorada personalizada.<br>
      Selecciona el sabor, tamaño, tema y agrega tu dirección y teléfono.
    </p>

    <form #contactoForm="ngForm" (ngSubmit)="enviarFormulario(contactoForm)">

      <!-- ======================= -->
      <!--   SABOR (OBLIGATORIO)   -->
      <!-- ======================= -->
      <div class="form-group">
        <label for="sabor">Sabor <span class="obligatorio">*</span>:</label>
        <select
          id="sabor"
          name="sabor"
          class="form-control"
          [(ngModel)]="sabor"
          required
          #saborNg="ngModel"
        >
          <option value="" disabled selected>Selecciona un sabor</option>
          <option value="vainilla">Vainilla</option>
          <option value="red velvet">Red Velvet</option>
          <option value="tarta de queso">Tarta de Queso</option>
          <option value="chocolate">Chocolate</option>
          <option value="kinder">Kinder</option>
          <option value="kit kat">Kit Kat</option>
          <option value="oreo">Oreo</option>
          <option value="plátano">Plátano</option>
          <option value="chocolate blanco">Chocolate Blanco</option>
          <option value="moka">Moka</option>
          <option value="zanahoria">Zanahoria</option>
          <option value="limón">Limón</option>
          <!-- Agrega más sabores si lo deseas -->
        </select>
        <div class="error" *ngIf="saborNg.invalid && saborNg.touched">
          <span>⚠️ Debes elegir un sabor.</span>
        </div>
      </div>

      <!-- ======================= -->
      <!--   TAMAÑO (OBLIGATORIO)  -->
      <!-- ======================= -->
      <div class="form-group">
        <label for="tamano">Tamaño <span class="obligatorio">*</span>:</label>
        <select
          id="tamano"
          name="tamano"
          class="form-control"
          [(ngModel)]="tamano"
          required
          #tamanoNg="ngModel"
        >
          <option value="" disabled selected>Selecciona un tamaño</option>
          <option value="1 piso (8 porciones) 40€">1 piso (8 porciones) (base 40€)"</option>
          <option value="2 pisos (14 porciones) 70€">2 pisos (14 porciones) (base 70€)</option>
          <option value="3 pisos (18 porciones) 100€">3 pisos (18 porciones) (base 100€)</option>
          <option value="4 pisos (22 porciones) 120€">4 pisos (22 porciones) (base 120€)</option>
        </select>
        <div class="error" *ngIf="tamanoNg.invalid && tamanoNg.touched">
          <span>⚠️ Debes elegir un tamaño.</span>
        </div>
      </div>

      <!-- ======================= -->
      <!--    IMAGEN SEGÚN PISO    -->
      <!-- ======================= -->
      <div class="form-group">
        <img
          *ngIf="rutaImagenPiso"
          [src]="rutaImagenPiso"
          alt="Vista {{ tamano }}"
          class="vista-piso"
        />
      </div>

      <!-- ======================= -->
      <!--   TEMA (OBLIGATORIO)    -->
      <!-- ======================= -->
      <div class="form-group">
        <label for="tema">Tema <span class="obligatorio">*</span>:</label>
        <input
          id="tema"
          name="tema"
          type="text"
          class="form-control"
          placeholder="Ej: Cumpleaños infantil"
          [(ngModel)]="tema"
          required
          minlength="3"
          #temaNg="ngModel"
        />
        <div class="error" *ngIf="temaNg.invalid && temaNg.touched">
          <span *ngIf="temaNg.errors?.['required']">⚠️ El tema es obligatorio.</span>
          <span *ngIf="temaNg.errors?.['minlength']">⚠️ Mínimo 3 caracteres.</span>
        </div>
      </div>

      <!-- ======================= -->
      <!--  MENSAJE (OPCIONAL)     -->
      <!-- ======================= -->
      <div class="form-group">
        <label for="mensaje">Mensaje (opcional):</label>
        <textarea
          id="mensaje"
          name="mensaje"
          class="form-control"
          placeholder="Escribe aquí detalles adicionales"
          [(ngModel)]="mensaje"
          rows="3"
          #mensajeNg="ngModel"
        ></textarea>
        <div class="error" *ngIf="mensajeNg.invalid && mensajeNg.touched">
          <span *ngIf="mensajeNg.errors?.['minlength']">
            ⚠️ Si escribes mensaje, mínimo 5 caracteres.
          </span>
        </div>
      </div>

      <!-- ======================= -->
      <!--  TELÉFONO (OBLIGATORIO) -->
      <!-- ======================= -->
      <div class="form-group">
        <label for="telefono">Teléfono <span class="obligatorio">*</span>:</label>
        <input
          id="telefono"
          name="telefono"
          type="tel"
          class="form-control"
          placeholder="Ej: 600123456"
          [(ngModel)]="telefono"
          required
          pattern="^[0-9]{9}$"
          #telefonoNg="ngModel"
        />
        <div class="error" *ngIf="telefonoNg.invalid && telefonoNg.touched">
          <span *ngIf="telefonoNg.errors?.['required']">
            ⚠️ El teléfono es obligatorio.
          </span>
          <span *ngIf="telefonoNg.errors?.['pattern']">
            ⚠️ Debe tener 9 dígitos numéricos.
          </span>
        </div>
      </div>

      <!-- ======================= -->
      <!--  DIRECCIÓN (OBLIGATORIO)-->
      <!-- ======================= -->
      <div class="form-group">
        <label for="direccion">Dirección <span class="obligatorio">*</span>:</label>
        <input
          id="direccion"
          name="direccion"
          type="text"
          class="form-control"
          placeholder="Ej: Calle Falsa 123, Ciudad"
          [(ngModel)]="direccion"
          required
          minlength="5"
          #direccionNg="ngModel"
        />
        <div class="error" *ngIf="direccionNg.invalid && direccionNg.touched">
          <span *ngIf="direccionNg.errors?.['required']">
            ⚠️ La dirección es obligatoria.
          </span>
          <span *ngIf="direccionNg.errors?.['minlength']">
            ⚠️ Mínimo 5 caracteres.
          </span>
        </div>
      </div>

      <!-- ======================= -->
      <!--    BOTÓN DE ENVÍO       -->
      <!-- ======================= -->
      <div class="form-group bonton-aling">
        <button
          type="submit"
          class="btn btn-primary btn-solicitar"
          [disabled]="contactoForm.invalid"
        >
          Solicita tu Tarta
        </button>
      </div>
    </form>
  </div>
</div>
